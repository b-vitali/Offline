///////////////////////////////////////////////////////////////////////////////
//
///////////////////////////////////////////////////////////////////////////////
void dump_hist_1d(const char* Filename, const char* Module, const char* HistName) {

  TH1F* h1 = gh1(Filename,Module,HistName);

  TAxis* xa = h1->GetXaxis();
  
  double xmin = xa->GetXmin();
  double xmax = xa->GetXmax();
  int    nb   = xa->GetNbins();


  printf("  const char  name []  = {\"%s\"} ;\n", HistName);
  printf("  const char  title[]  = {\"%s/%s/%s\"} ;\n", Filename, Module,HistName);
  printf("  int     nb   = %10i;\n",nb);
  printf("  double  xmin = %10.4f;\n",xmin);
  printf("  double  xmax = %10.4f;\n",xmax);

  printf("  double data[] = {\n");
  printf("  ");
  int ip = 0;

  for (int i=0; i<nb; i++) {
    int loc = i+1;
    printf(" %10.4f",h1->GetBinContent(loc));
    if (loc < nb) printf(", ");
    ip += 1;
    if (ip == 10) {
      printf("\n");
      printf("  ");
      ip = 0;
    }
  }

  if (ip != 0) printf("\n");

  printf("  };\n");

}

//-----------------------------------------------------------------------------
void dump_hist_1d_table(const char* Filename, const char* Module, const char* HistName) {

  TH1F* h = gh1(Filename,Module,HistName);

  TAxis* xa = h->GetXaxis();
  
  double xmin = xa->GetXmin();
  double xmax = xa->GetXmax();
  int    nbx  = xa->GetNbins();

  printf("title:                       \"%s/%s/%s\"\n", Filename, Module,HistName);
  printf("name:                        \"%s\"\n"      , HistName);
  printf("nbx,xmin,xmax: %10i %10.4f %10.4f\n",
	 nbx,xmin,xmax);

  int ip = 0;

  for (int i=0; i<nbx; i++) {
    int loc = i+1;
    printf(" %10.4f",h->GetBinContent(loc));
    ip += 1;
    if (ip == 10) {
      printf("\n");
      printf("  ");
      ip = 0;
    }
  }

  if (ip != 0) printf("\n");
}

//-----------------------------------------------------------------------------
// make a table file
//-----------------------------------------------------------------------------
void dump_hist_2d_table(const char* Filename, const char* Module, const char* HistName) {

  TH2* h = gh2(Filename,Module,HistName);

  TAxis* xa   = h->GetXaxis();
  
  double xmin = xa->GetXmin();
  double xmax = xa->GetXmax();
  int    nbx  = xa->GetNbins();

  TAxis* ya   = h->GetYaxis();
  
  double ymin = ya->GetXmin();
  double ymax = ya->GetXmax();
  int    nby  = ya->GetNbins();

  printf("title:                       \"%s/%s/%s\"\n", Filename, Module,HistName);
  printf("name:                        \"%s\"\n"      , HistName);
  printf("nbx,xmin,xmax,nby,ymin,ymax: %10i %10.4f %10.4f %10i %10.4f %10.4f\n",
	 nbx,xmin,xmax,nby,ymin,ymax);

  int ip = 0;

  int ntot = nbx*nby;
  int loc = 0;

  for (int iy=0; iy<nby; iy++) {
    int locy = iy+1;
    for (int ix=0; ix<nbx; ix++) {
      int locx = ix+1;
      printf(" %10.1f",h->GetBinContent(locx,locy));
      ip  += 1;
      loc += 1;
      if (ip == 10) {
	printf("\n");
	ip = 0;
      }
    }
  }

  if (ip != 0) printf("\n");
}

//-----------------------------------------------------------------------------
void init_hist(TH1F*& Hist) {
  const char  name[]  = {"trk_13/ep"} ;
  const char  title[]  = {"hist/m00s1412.track_ana.hist/TrackAna/trk_13/ep"} ;
  int     nb   =        300;
  double  xmin =     0.0000;
  double  xmax =     1.5000;
  double data[] = {
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      4.0000,
      10.0000,     14.0000,      9.0000,      7.0000,      3.0000,      2.0000,      9.0000,      7.0000,      4.0000,      6.0000,
       6.0000,      3.0000,      7.0000,      9.0000,      9.0000,      3.0000,      3.0000,      4.0000,      3.0000,      5.0000,
       6.0000,      3.0000,      8.0000,      3.0000,      8.0000,      5.0000,      2.0000,      6.0000,      4.0000,      3.0000,
       2.0000,      6.0000,      5.0000,      3.0000,      4.0000,      7.0000,      2.0000,      2.0000,      5.0000,      5.0000,
       7.0000,      7.0000,     10.0000,      1.0000,      6.0000,      5.0000,      9.0000,      5.0000,      6.0000,     11.0000,
      11.0000,     15.0000,     25.0000,     47.0000,     61.0000,    117.0000,    186.0000,    374.0000,    774.0000,   1296.0000,
    1155.0000,    721.0000,    595.0000,    589.0000,    436.0000,    352.0000,    468.0000,    570.0000,    608.0000,    719.0000,
     674.0000,    578.0000,    195.0000,     41.0000,     37.0000,     38.0000,     23.0000,     24.0000,     22.0000,     16.0000,
      22.0000,     22.0000,     11.0000,      8.0000,     11.0000,      5.0000,      7.0000,      8.0000,      5.0000,      4.0000,
       5.0000,      3.0000,      4.0000,      1.0000,      3.0000,      1.0000,      1.0000,      1.0000,      2.0000,      3.0000,
       1.0000,      3.0000,      2.0000,      5.0000,      3.0000,      1.0000,      1.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      1.0000,      1.0000,      0.0000,      2.0000,      2.0000,      1.0000,      0.0000,      2.0000,
       2.0000,      1.0000,      0.0000,      3.0000,      1.0000,      1.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       1.0000,      3.0000,      2.0000,      3.0000,      0.0000,      0.0000,      0.0000,      0.0000,      1.0000,      2.0000,
       1.0000,      1.0000,      0.0000,      1.0000,      0.0000,      1.0000,      1.0000,      0.0000,      0.0000,      1.0000,
       0.0000,      0.0000,      0.0000,      1.0000,      1.0000,      2.0000,      1.0000,      1.0000,      0.0000,      0.0000,
       0.0000,      2.0000,      1.0000,      1.0000,      2.0000,      0.0000,      0.0000,      2.0000,      0.0000,      3.0000,
       1.0000,      0.0000,      3.0000,      1.0000,      0.0000,      1.0000,      1.0000,      0.0000,      0.0000,      2.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       1.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      1.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,
       0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000,      0.0000
    };

  if (Hist) delete Hist;

  Hist = new TH1F(name,title,nb,xmin,xmax);

  for (int i=0; i<nb; i++) {
    Hist->SetBinContent(i+1,data[i]);
  };

  Hist->Draw();
}
