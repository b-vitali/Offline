# -*- mode:tcl -*-
#include "JobConfig/primary/flatE.fcl"

process_name: conversionsampler

services.TimeTracker : {
	printSummary : true
	dbOutput : {
	    filename  : ""
	    overwrite : false
	}
    }
services.scheduler.wantSummary: true

physics : {
    producers : { @table::Primary.producers
	generate: {  module_type: GammaConversionGun
	    verbositylevel : 0	  
	    doHistograms   : true
	    gammaStops: {
		@table::muonStops
		branchName: "stops"
		treeName: "conversionwriter/gammaStops/conversions"
	    }
	    # pMax            : 93.0 // MeV, maximum photon energy
	    # pMin            : 84.5 // MeV, minimum daughter energy
	    # czMin           : -0.2 // minimum photon cos(theta)
	    # czMax           :  0.2 // maximum photon cos(theta)
	    # testE           : 90   // MeV, test photon energy to use
	    # defaultMaterial : StoppingTarget_Al // test stopping material to use
	    # doOneLepton     : true // only put high energy lepton in the event
	    # xMin            : -490 // mm, photon vertex cuts 
	    # xMax            : -290 // mm, photon vertex cuts 
	    # yMin            : -100 // mm, photon vertex cuts 
	    # yMax            :  100 // mm, photon vertex cuts 
	    # zMin            :  350 // mm, photon vertex cuts 
	    # zMax            :  800 // mm, photon vertex cuts 
	    # rMin            :  0   // mm, photon vertex cuts 
	    # rMax            :  500 // mm, photon vertex cuts 	    
	}
    }
    analyzers : { @table::Primary.analyzers }
    filters :   { @table::Primary.filters   }
    e1 : [ ] 
    p1 : [ generate, g4run ] // g4run is needed to build physics process list
    trigger_paths : [ p1 ]
    end_paths : [ e1 ]
}

#include "JobConfig/primary/epilog.fcl"

#To speed up test running
physics.producers.g4run.physics.physicsListName : "QGSP_BERT"
#kill all events in geant to test generator without simulation (much faster)
physics.producers.g4run.steppingAction.minRMCDaughterEnergy : 90.0 // MeV
physics.producers.g4run.steppingAction.maxRMCEndpoint       : 80.0 // MeV


services.TFileService.fileName: "nts.owner.conversionsampler.version.sequencer.root"
outputs.Output.fileName:        "dig.owner.conversionsampler.version.sequencer.art"
#hack to access the root file on /pnfs/mu2e/resilient/
#can instead put the file in the $MU2E_BASE_RELEASE directory to run until is in /cvmfs/mu2e.opensciencegrid.org/DataFiles/
physics.producers.generate.gammaStops.inputFiles : [ "../../../pnfs/mu2e/resilient/users/mmackenz/gammastops/gamma_stops.root" ]

